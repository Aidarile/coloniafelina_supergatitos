<div class="container mt-5">

  <!-- Filtros -->
  <div class="filtros-row">
    <select [(ngModel)]="filtroSexo">
      <option value="">Todos los sexos</option>
      <option value="macho">Macho</option>
      <option value="hembra">Hembra</option>
      <option value="indeterminado">Indeterminado</option>
    </select>

    <select [(ngModel)]="filtroEstado">
      <option value="">Todas las situaciones</option>
      <option value="colonia">Colonia</option>
      <option value="buscando_adopcion">Buscando adopción</option>
      <option value="acogido">Acogido</option>
      <option value="en_acogida">Buscando acogida</option>
      <option value="adoptado">Adoptado</option>
      <option value="fallecido">Fallecido</option>
      <option value="desaparecido">Desaparecido</option>
    </select>
  </div>

  <!-- Mostrar mensaje si no hay gatos filtrados -->
  @let gatosVisibles = gatosFiltrados();

  @if (gatosVisibles.length === 0) {
    <div class="alert alert-light text-center p-4 mt-4 border rounded shadow-sm">
      <h5 class="mb-3">😺 ¡Todo bajo control! 😺</h5>
      <p>
        En estos momentos, ningún supergatito cumple con esa condición.
        ¡Gracias por tu interés! 🐾
      </p>
    </div>
  } @else {
    <div class="row">
      @for (gato of gatosVisibles; track gato._id) {
        <div class="col-md-4 mb-2 d-flex">
          <div class="card gato-card flex-fill d-flex flex-column">
            <!-- Imagen -->
            <div class="gato-foto-container text-center">
              <img [src]="gato.imagen" alt="{{ gato.nombre }}" class="gato-foto">
            </div>

          <!-- Info -->
            <div class="gato-info flex-grow-1 d-flex flex-column justify-content-between p-3">
              <div>
                <h5 class="gato-nombre text-center">{{ gato.nombre }}</h5>
                <p class="mb-1"><strong>Apodo:</strong> {{ gato.apodo }}</p>
                <p class="descripcion mb-2">{{ gato.descripcion }}</p>
                <p class="mb-1"><strong>Sexo:</strong> {{ gato.sexo | titlecase }}</p>
              </div>

              <div class="text-end">
                @switch (gato.estado) {
                  @case ('fallecido') {
                    <span class="icono-arcoiris" title="Cruzó el puente arcoíris 🌈">🌈</span>
                  }
                  @case ('desaparecido') {
                    <span class="icono-arcoiris" title="Desaparecido 🌈">🌈</span>
                  }
                  @case ('adoptado') {
                    <span class="icono-fiesta" title="¡Adoptado! 🎉">🎉</span>
                  }
                  @default {
                    <a href="#" class="btn btn-apadrinar">Apadrinar</a>
                  }
                }
              </div>
            </div>
          </div>
        </div>
      }
    </div>
  }
</div>
